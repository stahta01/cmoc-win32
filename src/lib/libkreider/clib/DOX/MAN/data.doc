

        DATA MODULES(3C) Kreider OS-9 C Library DATA MODULES(3C)


        NNAAMMEE 

             datlink, dunlink, lockdata, unlkdata -- Data module operations.

        SSYYNNOOPPSSIISS 

             int datlink(name, datptr, space)
             char *name, *datptr;
             int *space;

             int dunlink(datptr)
             char *datptr;

             int lockdata(datptr)
             char *datprt;

             int unlkdata(datptr)
             char *datptr;

        DDEESSCCRRIIPPTTIIOONN 

             DDAATTLLIINNKK loads (if necessary) and links the file _n_a_m_e.  
             _D_a_t_p_t_r is set to the address of the data section.  _S_p_a_c_e is 
             set to the free space available.  DDAATTLLIINNKK returns (-1) if 
             an error, _n_u_l_l for a successful link, and 1 if a load was 
             required.  If a 1 is returned, that means you are the first 
             user of that data module.  

             DDUUNNLLIINNKK unlinks the module belonging to _D_A_T_P_T_R.  A (-1) is 
             returned if an error occurs, or a _n_u_l_l if no error.  

             LLOOCCKKDDAATTAA attempts to lock the data module (_d_a_t_p_t_r is 
             considered to be the lock byte) by changing the lock byte, 
             which is normally -1, to a _n_u_l_l.  LLOOCCKKDDAATTAA returns a 
             process stack level on failure, or a _n_u_l_l.  _E_R_R_N_O is not 
             set.  

             UUNNLLKKDDAATTAA unlocks the data module.  It returns a (-1) on any 
             attempt to unlock a module that has not already been 
             locked.  

             A _n_u_l_l is returned upon success.  

        NNOOTTEE 

             A data module is considered locked when it is loaded.  It 
             must be set for use by a call to UUNNLLKKDDAATTAA after the 
             original loader is finished with any initialization 
             required.  A user can determine if they are the original 
             owner by the value returned during the DDAATTLLIINNKK call.  

             In all cases, _d_a_t_p_t_r points to the lock byte.  User free 
             space begins at _d_a_t_p_t_r + 1.  





                                                                


