

        DIR(3C)          Kreider OS-9 C Library          DIR(3C)


        NNAAMMEE 

             opendir, readdir, telldir, rewinddir, seekdir, closedir

             Directory operations

        SSYYNNOOPPSSIISS 

             #include <dir.h>

             *opendir(dirname)
             char *dirname;

             *readdir(dirp)
             DIR *dirp;

             telldir(dirp)
             DIR *dirp;
             sp
             rewinddir(dirp)
             DIR *dirp;

             seekdir(dirp, loc)
             DIR *dirp;
             long loc;

             closedir(dirp)
             DIR *dirp;

        DDEESSCCRRIIPPTTIIOONN 

             OOPPEENNDDIIRR opens the specified directory and associates a 
             directory stream with it.  OOPPEENNDDIIRR returns a pointer to be 
             used to identify the directory stream in subsequent 
             operations.  The pointer _n_u_l_l is returned if _d_i_r_n_a_m_e can 
             not be accessed or of it can not "malloc" enough memory to 
             hold the whole thing.  Directory sectors are NOT buffered.  

             RREEAADDDDIIRR returns a pointer to a structure containing the 
             next directory entry, unless the entry is a deleted file in 
             which case the next entry is returned.  It returns _n_u_l_l 
             upon reaching the end of the directory or detecting an 
             invalid SSEEEEKKDDIIRR operation.  

             TTEELLLLDDIIRR returns the current location associated with the 
             named directory stream.  Values returned by TTEELLLLDDIIRR are 
             valid only for the lifetime of the associated dir pointer.  
             If the directory is closed and then reopened, the TTEELLLLDDIIRR 
             value may be invalidated.  It is safe to use a previous 
             TTEELLLLDDIIRR value immediately after a call to OOPPEENNDDIIRR and 
             before any calls to RREEAADDDDIIRR.  







                                                                




        DIR(3C)          Kreider OS-9 C Library          DIR(3C)


             RREEWWIINNDDDDIIRR resets the position of the named directory stream 
             to the beginning of the directory.  

             This function is implemented as a macro in DDIIRR.HH.  

             SSEEEEKKDDIIRR sets the position of the next RREEAADDDDIIRR operation in 
             the directory stream.  The new position reverts to the one 
             associated with the directory stream when the TTEELLLLDDIIRR 
             operation was performed.  CCLLOOSSEEDDIIRR closes the named 
             directory stream and frees the structure associated with 
             _d_i_r_p.  

        NNOOTTEE 

             For user convinence, function declarations are made in the 
             header DDIIRR.HH below.  



             /*
             **      Dir.h
             /*
             
             struct direct {
                     long d_addr;       /* file descriptor address */
                     char d_name[30];   /* directory entry name    */
                     };
             
             typedef struct {
                     int   dd_fd;       /* fd for open directory   */
                     char  dd_buf[32];  /* a one entry buffer      */
                     } DIR;
             
             #define DIRECT        struct direct
             #define rewinddir(a)  seekdir(a, 0L)
             
             extern DIR            *opendir();
             extern DIRECT         *readdir();
             extern long           telldir();
             extern  /* void */    seekdir(), closedir();


















                                                                


