

        PASSWORD(3C)     Kreider OS-9 C Library     PASSWORD(3C)


        NNAAMMEE 

             *getpwent, *getpwuid, *getpwnam, setpwent, endpwent, getpwdlm

             Password file operations

        SSYYNNOOPPSSIISS 

             #include <password.h>
             
             PWENT *getpwent()
             
             PWENT *getpwuid(uid)
             int uid;
             
             PWENT *getpwnam(name)
             char *name;
             
             void setpwent()
             
             void endpwent()
             
             int getpwdlm()

        DDEESSCCRRIIPPTTIIOONN 

             Each of the functions described below perform some 
             operation on the PPAASSSSWWOORRDD file maintained in /DDDD/SSYYSS.  

             Notice also that three of the functions are declared as 
             pointer functions, and two are of type VOID.  

             GGEETTPPWWEENNTT returns a pointer to a structure containing the 
             broken down password entry.  It searches for the file 
             /DDDD/SSYYSS/PPAASSSSWWOORRDD, opens it on the first call, and reads the 
             first password entry.  Any subsequent calls will overwrite 
             the data contained in the structure PPWWEENNTT defined in 
             PPAASSSSWWOORRDD.HH, ssoo tthhaatt ddaattaa mmuusstt be copied out before the next 
             call is made to preserve it.  

             This function returns a _n_u_l_l upon reaching the end of the 
             password file, and a -1 if an error occurs.  

             GGEETTPPWWUUIIDD performs the same function as GGEETTPPWWEENNTT above, but 
             it searches the password file until a given user ID, as 
             defined by UID, is found.  

             GGEETTPPWWNNAAMMEE again performs the same as GGWWTTPPWWEENNTT, but searches 
             the password file until the entry defined my _n_a_m_e is 
             found.  The search for _n_a_m_e is not case sensitive.  

             SSEETTPPWWEENNTT rewinds the password file pointer so additional 
             reads can be made after the end of the file is reached.  





                                                                




        PASSWORD(3C)     Kreider OS-9 C Library     PASSWORD(3C)


             EENNDDPPWWEENNTT terminates access and closes the password file.  

             GGEETTPPWWDDLLMM returns the current password file delimiter 
             character.  In an OS9 password file, the field delimiting 
             character is a comma, while in other password utilities and 
             files, a semi-colon is used for the delimiter character.  
             This function is provided as a means to check the current 
             type.  

        NNOOTTEE 

             For user convinence, function declarations are made in the 
             header file Password.h provided below.  

                  /*
                  **  Password.h
                  **
                  **  Definitions for accessing the OS9 password file.
                  **  Two different delimiters are accepted, ',' and ':'.
                  **  In the second (Unix like) case, an extra field is
                  **  defined for comments (ugcos).
                  */
                  
                  #ifdef TEST
                  #define  PASSWORD "/dd/sys/massword"
                  #else
                  #define  PASSWORD "/dd/sys/password"
                  #endif
                  
                  #define  PWEMAX   64       /* maximum lines in password file */
                  #define  PWSIZ    132  /* maximim size of password file line */
                  #define  PWNSIZ   32          /* maximum size of user's name */
                  #define  PWPSIZ   32      /* maximum size of user's password */
                  #define  UNXDLM   ':'      /* Unix style password file delim */
                  #define  OS9DLM   ','       /* OS9 style password file delim */
                  
                  typedef struct {
                        char  *unam,
                              *upw,
                              *uid,
                              *upri,
                              *ugcos,
                              *ucmd,
                              *udat,
                              *ujob;                      /* field pointers */
                        } PWENT;
                  
                  
                  /* returns a pointer to broken down password entry */
                  PWENT    *getpwent();
                  
                  /* same, but for the given int uid */
                  PWENT    *getpwuid();
                  




                                                                




        PASSWORD(3C)     Kreider OS-9 C Library     PASSWORD(3C)


                  /* same, but for the given char *name */
                  PWENT    *getpwnam();
                  
                  /* rewinds the password file for another scan */
                  /*void*/ setpwent();
                  
                  /* terminates password file access (closes) file */
                  /*void*/ endpwent();
                  
                  /* returns the current password entry delimiter */
                  /*void*/ getpwdlm();















































                                                                


